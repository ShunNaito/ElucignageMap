<html>
<head>
	<title>ElucignageMap</title>
	<meta charset="utf-8">
	<script src="js/jquery-1.6.2.js"></script>
	<script type="text/javascript" src="./js/getcsv.js"></script>
	<link rel="stylesheet" href="css/getcsv.css" type="text/css">
	<style>

    body {
      font-family: Verdana,Arial,sans-serif;
    }

    h2 {
      font-size: 1.2em;
      margin: 60px 0 5px 0;
    }

    .wrapper {
      width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    .wrapper > div {
      margin: 35px 0;
    }

    #slider8 {
      height: 250px;
    }

    #slider9 {
      height: 250px;
    }


  </style>
	<link rel="stylesheet" href="css/d3.slider.css" />
</head>
<body onLoad="displayText()">
<script type="text/javascript">
	// Ebolaのcsvデータから日付と本文を取ってくる
    var result = loadcsv('./EbolaTest.csv');

    function displayText() {
	    //　新聞記事の本文を表示する
		for(var i=0; i<=result.length-1; i++){
			var $div = $('<div>')
        		.attr({"id": result[i].date,
        			"class": 'article'});
	        $div.append(result[i].text+'<br>');
	        $('#articlePane').append($div);
	    }
    }
</script>
	<div id="articlePane">
	</div>
	<div id="test"></div>
	<div id="graphPane">
		<script src="http://d3js.org/d3.v3.min.js"></script>
		<script src="js/d3.slider.js"></script>
		<script>
		// タイムスライダー
		d3.select('#graphPane').call(d3.slider().axis(true).min(1008).max(1017).step(1).on("slide", function(evt, value) {
      			d3.select('#test').text(value);
      			//　タイムスライダーの値（時系列）に応じて記事をハイライト
      			for(var i=0; i<=result.length-1; i++){
					if(value == result[i].date){
						document.getElementById(result[i].date).style.color = "red";
					}else{
						document.getElementById(result[i].date).style.color = "black";
					}
	    		}
    		}));
		</script>
	</div>
</body>
</html>